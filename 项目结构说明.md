# 项目结构说明

```
multi-agent-base/
│
├── 📁 backend/                      # FastAPI 后端服务
│   ├── __init__.py
│   ├── main.py                     # FastAPI 应用入口 ⭐
│   ├── config.py                   # 配置管理（读取 .env）
│   │
│   ├── 📁 api/                     # API 层
│   │   ├── __init__.py
│   │   ├── 📁 routes/              # API 路由
│   │   │   ├── __init__.py
│   │   │   ├── analysis.py        # 告警分析 + 历史记录 API
│   │   │   ├── stats.py           # 统计信息 + 健康检查 API
│   │   │   └── rag.py             # RAG 上传 / 问答 / 管理 API ⭐
│   │   └── 📁 models/              # 数据模型
│   │       ├── __init__.py
│   │       └── schemas.py         # Pydantic 模型定义
│   │
│   └── 📁 services/                # 业务逻辑层
│       ├── __init__.py
│       ├── agent_service.py       # 多智能体服务封装 ⭐
│       ├── memory_storage.py      # 内存历史存储（告警记录）
│       └── rag_service.py         # RAG 核心服务 ⭐
│
├── 📁 frontend/                     # Streamlit 前端应用
│   ├── __init__.py
│   ├── app.py                      # 主页面（系统介绍 + 导航）⭐
│   │
│   ├── 📁 pages/                   # 功能子页面（自动注册到导航栏）
│   │   ├── __init__.py
│   │   ├── 1_🔍_Alert_Analysis.py    # 告警分析页面
│   │   ├── 2_📊_Analysis_History.py  # 历史记录页面
│   │   ├── 3_📚_RAG_问答.py          # RAG 知识库问答页面 ⭐
│   │   └── 4_📈_System_Dashboard.py  # 系统仪表板页面
│   │
│   └── 📁 utils/                   # 工具模块
│       ├── __init__.py
│       └── api_client.py          # 前端 HTTP 客户端（封装所有 API 调用）
│
├── 📁 src/                         # 多智能体核心引擎
│   ├── __init__.py
│   │
│   ├── 📁 agents/                  # 智能体模块
│   │   ├── __init__.py
│   │   ├── optimized_router.py    # 路由智能体（关键词 + 正则评分）⭐
│   │   ├── optimized_expert.py    # 专家智能体（LLM 分析 + 规则降级）⭐
│   │   └── optimized_system.py    # 多智能体协调器 ⭐
│   │
│   ├── 📁 models/                  # 模型推理接口
│   │   ├── __init__.py
│   │   ├── api_client.py          # 异步 LLM API 客户端（httpx）
│   │   └── llm_inference.py       # LLM 推理封装（全局单例）
│   │
│   └── 📁 utils/                   # 工具函数
│       ├── config.py              # 配置读取（对接 .env）
│       └── structured_logger.py   # JSONL 结构化日志
│
├── 📁 logs/                         # 运行日志目录（Docker volume 持久化）
│   ├── backend.log                # FastAPI 后端日志
│   ├── frontend.log               # Streamlit 前端日志
│   └── supervisord.log            # 进程管理器日志
│
├── 📁 chroma_db/                    # ChromaDB 向量库目录（Docker volume 持久化）
│
├── 📄 Dockerfile                   # Docker 镜像构建配置 🐳
├── 📄 docker-compose.yml           # 容器编排配置 🐳
├── 📄 supervisord.conf             # supervisord 进程配置
├── 📄 .dockerignore                # Docker 构建上下文排除规则
│
├── 📄 start_backend.py             # 本地开发：后端启动脚本 🚀
├── 📄 start_frontend.py            # 本地开发：前端启动脚本 🚀
│
├── 📄 .env                          # 环境变量配置（不提交 Git）
├── 📄 .gitignore                   # Git 忽略规则
├── 📄 requirements.txt             # Python 依赖清单 📦
│
├── 📄 README.md                    # 项目主说明文档 📖
├── 📄 启动文档.md                   # Docker 部署与启动文档 📖
├── 📄 开发指南.md                   # 开发文档（架构 / API / 扩展指南）📖
├── 📄 项目结构说明.md               # 本文件 📖
└── 📄 项目文件详解.md               # 项目各文件功能详细说明 📖
```

## 图标说明

| 图标 | 含义 |
|------|------|
| ⭐ | 核心文件 |
| 🚀 | 本地启动入口 |
| 🐳 | Docker 相关文件 |
| 📖 | 文档文件 |
| 📦 | 依赖配置 |
| 📁 | 目录 |
| 📄 | 文件 |

## 模块职责

| 模块 | 职责 |
|------|------|
| **backend** | FastAPI 异步 Web 服务，提供 RESTful API（分析、历史、统计、RAG） |
| **frontend** | Streamlit 多页面用户界面，可视化交互 |
| **src/agents** | 多智能体核心（路由智能体 + 专家智能体 × 3 + 协调器） |
| **src/models** | 异步 LLM API 调用封装（httpx 客户端 + 全局单例推理器） |
| **src/utils** | 配置读取、JSONL 结构化日志 |
| **backend/services/rag_service** | RAG 核心：文本分块、Embedding 向量化、ChromaDB 存储与检索、LLM 生成答案 |

## 快速导航

| 操作 | 命令 / 地址 |
|------|-------------|
| Docker 启动（推荐）| `docker-compose up -d --build` |
| 本地启动后端 | `python start_backend.py` |
| 本地启动前端 | `python start_frontend.py` |
| API 文档（Swagger）| http://localhost:8000/docs |
| 前端界面 | http://localhost:8501 |
| 健康检查 | http://localhost:8000/api/health |
